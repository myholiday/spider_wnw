#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/5/28# Copyright (c) 2018 spider3. All rights reserved.import requestsimport jsonimport pymysqldef get_all_city():    """    获取大众点评所有省市区数据，并一一标号    :return:    """    url = "http://www.dianping.com/ajax/citylist/getAllDomesticCity"    response = requests.get(url)    data = json.loads(response.text)    city_map = data["cityMap"]  # type:dict 省所对应的区信息    province_list = data["provinceList"]  # type:list 省信息    # province_city_pair(city_map, province_list)    return city_mapdef province_city_pair(city_map, province_list):    for province in province_list:        city_list = city_map[province["provinceId"]]  # 省对应的区列表        # province_name = province["provinceName"]  # 省名字        for city_data in city_list:            city_data["provinceName"] = province["provinceName"]  # 把省名字放入信息中            city_data["city_sort_name"] = city_data["cityName"]# def get_all_qu():def main():    citymap = get_all_city()  #type:dict    li = []    for k, v in citymap.items():        li.extend(v)    with open("./city.json", "w") as f:        f.write(json.dumps(li,))if __name__ == '__main__':    main()