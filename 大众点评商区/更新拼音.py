#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/6/26# Copyright (c) 2018 spider3. All rights reserved.from pypinyin import pinyin,Styleimport pymysqlconnection = pymysql.connect(host='localhost',                                 user='root',                                 password='root',                                 db='feigo_data',                                 port=3306,                                 charset='utf8')def get_data():    sql = "select `id`,`name` from feigo_regions; "    with connection.cursor() as cursor:        cursor.execute(sql)        data = cursor.fetchall()        # print(data)    print(len(data))    return datadef write_sql(sql):    with open("./updatep_pinyin.sql", "a", encoding="utf-8") as f:        f.write(sql)def get_pinyin(chinese):    pinyin_list = pinyin(chinese, style=Style.FIRST_LETTER)    return "".join([i[0][0] for i in pinyin_list])def main():    data = get_data()    print(data)    for one_data in data:        sql = "UPDATE `feigo_regions` SET `pinyin_code`='{}' WHERE `id`={};\n".format(get_pinyin(one_data[1]), one_data[0])        write_sql(sql)if __name__ == '__main__':    main()