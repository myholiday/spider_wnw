#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/3/16# Copyright (c) 2018 spider3. All rights reserved.import jsonimport requestsimport refrom utils.add_detail import add_detaildef spider():    url = 'http://www.imolacn.com/static/js/store.js'    response = requests.get(url)    # print(response.text)    li_str = re.findall(r'data_info = (.*?),\n\t\topts', response.text, re.S)    old_li = eval(li_str[0])    li = []    for one_data in old_li:        tmp = {}        tmp['latitude'] = one_data[0]        tmp['longitude'] = one_data[1]        tmp['name'] = one_data[2]        tmp['address'] = one_data[3]        tmp['phone_number'] = one_data[4]        print(tmp)        li.append(tmp)    with open('../data/imola.json', 'w') as f:        f.write(json.dumps(li))def save():    add_detail(127028, 1044, '../data/imola.json', '../data/imola_detail.json')def main():    # spider()    save()if __name__ == '__main__':    main()