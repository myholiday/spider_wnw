#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/3/20# Copyright (c) 2018 spider3. All rights reserved."""雅芳婷"""import json"""https://www.afontane.com/default/map/"""import requestsfrom lxml import etreedef spider():    url = 'https://www.afontane.com/default/map/'    response = requests.get(url)    html = etree.HTML(response.text)    nodes = html.xpath('//div[@class="store_map_wrapper_left"]/div')    li = []    for node in nodes:        tmp = {}        tmp['city'] = node.xpath('./@city')[0].strip()        y,x,_ = node.xpath('./@onclick')[0].strip("map_xxx('").strip("');").split(',')        tmp['longitude'] = x.strip("'")        tmp['latitude'] = y.strip("'")        tmp['name'] = node.xpath('./div[2]/div/h3/text()')[0].strip()        tmp['address'] = node.xpath('./div[2]/div[2]/text()')[0].strip()        tmp['time'] = node.xpath('./div[2]/div[3]/text()')[0].strip()        tmp['phone_number'] = node.xpath('./div[2]/div[5]/text()')[0].split(":")[-1].strip()        li.append(tmp)        print(tmp)    with open('../data/afontane.json','w') as f:        f.write(json.dumps(li,ensure_ascii=False))def main():    spider()if __name__ == '__main__':    main()