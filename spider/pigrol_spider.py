#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/3/30# Copyright (c) 2018 spider3. All rights reserved."""德国品赫漆""""""http://www.pigrol.com.cn/index.php?option=com_flexicontent&view=item&cid=2&id=187&Itemid=566&lang=zh"""import jsonimport requestsfrom utils.add_detail import add_detaildef spider():    url = 'http://www.pigrol.com.cn/storelocator/data/data_joomla.php'    response = requests.get(url)    data = json.loads(response.text)    for one_data in data:        one_data['name'] = one_data['Name1']        one_data['address'] = one_data['Strasse']        one_data['city'] = one_data['Ort']        one_data['phone_number'] = one_data['Telefon1']        url = 'http://api.map.baidu.com/geoconv/v1/'        data_ = {'coords': '{},{}'.format(one_data['lng'], one_data['lat']),                 'from': 3,                 'to': 5,                 'ak': 'mDml72vqmPtHmZHl7tus153lx9e1pg8A'}        jw = requests.get(url, params=data_)        jw = json.loads(jw.text)        one_data['longitude'] = jw['result'][0]['x']        one_data['latitude'] = jw['result'][0]['y']        print(one_data)    try:        with open('../data/pigrol.json', 'w') as f:            f.write(json.dumps(data, ensure_ascii=False))    except:        with open('../data/pigrol.json', 'w') as f:            f.write(json.dumps(data, ensure_ascii=True))def save():    add_detail(157714, 134, "../data/pigrol.json", '../data/pigrol_detail.json')def main():    # spider()    save()if __name__ == '__main__':    main()