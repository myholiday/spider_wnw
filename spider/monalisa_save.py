#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/3/12# Copyright (c) 2018 spider3. All rights reserved.import jsonfrom utils.get_baidu_coord import BaiduCoordfrom utils.get_address_by_ten_coord import get_address_by_ten_coordfrom utils.get_region_id import get_region_idfrom utils.save2mysql import save2mysqldef load_data():    data = None    with open("../data/mona.json","r") as f:        data = json.loads(f.read())    # data=[{"name": "新昌县店", "phone_number": "0575-86296816", "address": "浙江省绍兴市嵊州市迪贝路信源国际家居生活广场5楼"}, {"name": "绍兴市店", "phone_number": "0575-85527699", "address": "绍兴市绍兴县柯桥镇汽车城二楼长城陶瓷（钱道公路旁）蒙娜丽莎瓷砖"}]    for one_data in data:        one_data["brand_id"]=1320        one_data["data_source"]=1        bc = BaiduCoord(one_data["address"])        try:            ten_coord = bc.get_ten_coord()            jw_coord = bc.get_jw_coord()        except:            print("================错误===============", data)            one_data["longitude"] = 0            one_data["latitude"] = 0            one_data["region_id_1"] = 0            one_data["region_id_2"] = 0            one_data["region_id_3"] = 0            one_data["create_time"] = "NOW()"        one_data["longitude"] = jw_coord["x"]        one_data["latitude"] =jw_coord["y"]        region_data = get_address_by_ten_coord(ten_coord["x"],ten_coord['y'])        district = region_data['address_detail']['district']        regionid1, regionid2, regionid3 = get_region_id(district)        one_data["region_id_1"] = regionid1        one_data["region_id_2"] = regionid2        one_data["region_id_3"] = regionid3        one_data["create_time"] = "NOW()"        print(one_data)    with open("../monalisa.json","w") as f:        f.write(json.dumps(data))def save_data():    num = 71560    with open("../monalisa.json", "r") as f:        data = f.read()        data = json.loads(data)        for i in data:            i["id"] = num            i["preview_image"] = 'brands_images/full/1320.jpg'            if i["phone_number"] is None:                i["phone_number"]=0            save2mysql("localhost", "root", "root", "my_test", "feigo_shops", i)            num += 1def main():    # load_data()    save_data()if __name__ == '__main__':    main()