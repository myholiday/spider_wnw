#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/3/13# Copyright (c) 2018 spider3. All rights reserved.import requestsimport json"""获取地址为 ： http://www.haier.com/cn/consumer/haier_store/zmd/index.shtml"""def get_province():    """获取省信息"""    url = "http://www.haier.com/HaierFramework/servicesupport/queryProvices.do"    response = requests.get(url)    data = json.loads(response.text)    print(response.text)    provinceInfo = data["provinceInfo"]    return provinceInfodef get_city(province):    """获取市信息"""    url = "http://www.haier.com/HaierFramework/servicesupport/queryCitys.do"    data = {"province": province}    response = requests.get(url, data)    data = json.loads(response.text)    cityInfo = data["cityInfo"]    print(response.text)    return cityInfodef get_store(province, city):    """获取商店详情"""    url = "http://www.haier.com/HaierFramework/cnStoreShopService/getPageStoreShopList.do"    data = {        'province': province,        'city': city,        'ordercondition': 2,        'pageIndex': 1,        'pageSize': 10000,    }    response = requests.post(url, data)    data = json.loads(response.text)    # print(response.text)    results = data["page"]["results"]    totalCount = data["page"]["totalCount"]    if len(results) != int(totalCount):        print("=====================",province, city)    return resultsdef save_data(data):    with open("../data/haier.json","w") as f:        f.write(json.dumps(data))def main():    data = []    provinces = get_province()    for province in provinces:  # 获取省，        citys = get_city(province)  # 获取市，        for city in citys:            print(province, city)            result = get_store(province, city)            data += result    save_data(data)if __name__ == '__main__':    main()