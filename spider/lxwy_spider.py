#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/5/4# Copyright (c) 2018 spider3. All rights reserved.# 理想卫浴# http://www.china-ideal.com/web/contactus/57.htmlimport requests_htmlimport reimport jsondef spider():    url = "http://www.china-ideal.com/web/contactus/57.html"    session = requests_html.HTMLSession()    response = session.get(url)    province = 'province'    city = 'city'    name = 'name'    data_source = re.findall(r"var dataSource = \[(.*?)];", response.content.decode(), re.S)    data = "[" + data_source[0].replace("\r\n", "").replace("\t", "") + "]"  # 替换无用符号    data = eval(data)    for one_data in data:        one_data['name'], one_data['address'], one_data['phone_number'] = one_data['name'].split('<br/>')        one_data['phone_number'] = one_data['phone_number'].strip("电话：")    print(data)    with open("../data/lxwy.json", "w") as f:        f.write(json.dumps(data))def main():    spider()if __name__ == '__main__':    main()