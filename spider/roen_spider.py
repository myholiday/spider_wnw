#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/3/20# Copyright (c) 2018 spider3. All rights reserved.""" 柔然壁纸""""""http://www.roen.com.cn/DPSearch/SearchStore.aspx"""# 找到接口直接遍历import requestsimport jsonfrom utils.add_detail import add_detaildef get_one_data(id):    url = 'http://www.roen.com.cn/DPSearch/ashx/StoreInfoHandler.ashx'    data = {'method': 'GetStoreInfo', 'Id': id}    response = requests.get(url, data)    try:        one_data = json.loads(response.text)        one_data['phone_number'] = one_data['SPhone']        one_data['address'] = one_data['SAddress']        one_data['name'] = one_data['SName']        one_data['city'] = one_data['SProvince']        print(id, one_data)        return one_data    except:        print(id)        return Nonedef spider():    li = []    for i in range(950, 1700):        one_data = get_one_data(i)        if one_data:            li.append(one_data)    with open('../data/roen.json', 'w') as f:        f.write(json.dumps(li, ensure_ascii=False))def save():    add_detail(128932, 1262, '../data/roen.json', '../data/roen_detail.json')def main():    # spider()    save()if __name__ == '__main__':    main()