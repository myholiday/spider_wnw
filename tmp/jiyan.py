#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/5/22# Copyright (c) 2018 spider3. All rights reserved.from selenium import webdriverfrom selenium.webdriver import ActionChainsfrom PIL import Imageimport randomimport timedef get_url():    url = "https://auth.geetest.com/register/"    driver = webdriver.Chrome()    driver.get(url)    element = driver.find_element_by_xpath('//*[@id="base"]/div[2]/div/div[3]/div/div/form/div[1]/div/div/input')    element.send_keys("45465331@qq.com")    time.sleep(1)    element_click = driver.find_element_by_xpath('//*[@id="captchaId2"]/div/div[2]')    location = element_click.location    print(location)    ActionChains(driver).click(element_click).perform()    # mouse_move(driver, location)    get_pic(driver,"1.png",'/html/body/div[2]/div[2]/div[1]/div/div[1]/div[1]/div/a/div[1]/div')    element = driver.find_element_by_xpath('/html/body/div[2]/div[2]/div[1]/div/div[1]/div[2]/div[2]').click()    # ActionChains(driver).double_click(element).perform()  # 在此元素上双击    time.sleep(3)    get_pic(driver, "2.png",'/html/body/div[2]/div[2]/div[1]/div/div[1]/div[1]/div')    time.sleep(10)def get_pic(driver,name,xpath):    time.sleep(2)    element =driver.find_element_by_xpath(xpath)    driver.save_screenshot('./'+name)    left = element.location["x"]    top = element.location["y"]    right = element.location['x'] + element.size['width']    bottom = element.location['y'] + element.size['height']    im = Image.open('./'+name)    im = im.crop((left, top, right, bottom))    im.save('./'+name)    print('保存图片成功',)def mouse_move(driver, location):    ActionChains(driver).move_by_offset(0, 0)    x, y = 0, 0    l_x, l_y = location["x"]+10, location["y"]+12    for i in range(3000):        x_add, y_add = random.randint(0, 1), random.randint(0, 1)        if x < l_x:            x = x+x_add        if y < l_y:            y = y+y_add        print(x, y)        time.sleep(0.001)        if x >= l_x and y >= l_y:            ActionChains(driver).move_by_offset(x, y).click()            print("点击")            break        else:            ActionChains(driver).move_by_offset(x, y)def compare_pic():    image_file = Image.open("convert_image.png")  # open colour image    image_file = image_file.convert('1')  # convert image to black and white    imggry = image_file.convert('L')    data = imggry.getdata()    print(data)def main():    # get_url()    compare_pic()if __name__ == '__main__':    main()