#!/usr/bin/env python# -*- coding: utf-8 -*-# Created by spider3 on 2018/6/25# Copyright (c) 2018 spider3. All rights reserved.import requests_htmlimport requestsimport refrom PIL import Imagese = requests_html.HTMLSession()def get_index():    headers = {        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8",        "Accept-Encoding": "gzip, deflate",        "Accept-Language": "zh-CN,zh;q=0.9",        "Cookie": "ASP.NET_SessionId=jwxt14!!uamj43f0qtaic445d1mft3ni",        "Host": "61.142.33.204",        "Referer": "http://61.142.33.204/default2.aspx",        "Proxy-Connection": "keep-alive",        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/65.0.3325.181 Safari/537.36",    }    # proxies = {"http": "http://223.223.187.195:80"}    response = se.get("http://61.142.33.204/")    print("se1",se.cookies)    VIEWSTATE = re.findall(r'name="__VIEWSTATE" value="(.*)?"', response.text)[0]    print(VIEWSTATE)    # print(response.text)    # se.get("http://61.142.33.204/CheckCode.aspx")    yzm = se.get("http://61.142.33.204/CheckCode.aspx?")  # yzm    with open("./yzm.jpg", "wb") as f:        f.write(yzm.content)    img = Image.open("./yzm.jpg")    img.show()    yzm_str = input("请输入：")    print("#%s#"%(yzm_str))    post_data = {        "__VIEWSTATE": "dDw3OTkxMjIwNTU7Oz5vJ/yYUi9dD4fEnRUKesDFl8hEKA==",        "TextBox1": "2013131131",        "TextBox2": "2095439742",        # "TextBox1": "2015120506",  # nv        # "TextBox2": "123456789",        "TextBox3": yzm_str,        "RadioButtonList1": "学生",        "Button1":""    }    r = se.post("http://61.142.33.204/default2.aspx", data=post_data)    print("se2", se.cookies)    # print(r)    # print(r.text)    xt_html = se.get("http://61.142.33.204/xs_main.aspx?xh=2013131131#a")    # print(xt_html.text)def ask_main():    url = "http://61.142.33.204/xs_main.aspx?xh=2015120506"    r = se.get(url)    print(r.text)def main():    get_index()    ask_main()if __name__ == '__main__':    main()